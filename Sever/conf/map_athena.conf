//--------------------------------------------------------------
// Giraffe<模擬器> - 地圖服務器配置文件
// 本配置文件由 Peter Kieser <pfak@telus.net> 翻譯成英文
// 由Giraffe<模擬器>開發團隊翻譯成中文並加以潤色
//--------------------------------------------------------------
// 提示: 此配置文件中, 只要是以 // 作為開頭的行, 都是注釋信息. 
// 注釋信息您可以隨意修改, 不會幹擾服務器的任何行為. 
//--------------------------------------------------------------

// 登錄、角色、地圖服務器之間內部通訊的賬號密碼
// 此處的值必須和數據庫中 login 表那條性別為 S 的記錄一致,
// 否則會導致三個服務器之間無法進行內部通訊
userid: s1
passwd: p1

// 角色服務器的 IP 地址
// 地圖服務器會依賴這個 IP 地址去和角色服務器建立連接.
// 
// 提醒: 若您想啟用 char_ip 選項的話, 記得去掉 char_ip 前面的注釋符 //,
//       否則服務器會忽略它, 導致配了和沒配一樣. 
//char_ip: 127.0.0.1

// 地圖服務器綁定的 IP 地址
// 若啟用了此選項, 那麽地圖服務器只會監聽來自這個 IP 地址的網卡數據.
// 
// 注意: 該選項允許你在有多個公網網卡(也意味著有多個公網IP)的機器上, 
//       使用相同的"地圖服務器端口"來開多個服. 
// 提醒: 若您想啟用 bind_ip 選項的話, 記得去掉 bind_ip 前面的注釋符 //,
//       否則服務器會忽略它, 導致配了和沒配一樣. 
//bind_ip: 127.0.0.1

// 角色服務器端口
// 地圖服務器會根據此處的配置和角色服務器建立連接
char_port: 6121

// 地圖服務器的 IP 地址
// 當玩家通過角色服務器選擇角色之後, 會將這里設置的 IP 地址發送給客戶端.
// 客戶端將會使用這里配置的 IP 地址來和地圖服務器建立連接. 
// 若您想對外開服(而不是開單機服)的話, 請把您的公網 IP 地址設置到這里. 
// 
// 提醒: 若您想啟用 map_ip 選項的話, 記得去掉 map_ip 前面的注釋符 //,
//       否則服務器會忽略它, 導致配了和沒配一樣. 
map_ip: 192.168.200.130

// 地圖服務器端口 (默認端口為: 5121)
// 此端口會開放給遊戲客戶端建立連接
map_port: 5121

// 往控制台窗口中顯示內容時, 在每行信息的前面加上時間戳. 
// 最終組成的時間最大長度不能超過 20 個字符.
//  
// 常用的時間格式有:
//    %I:%M:%S %p (小時:分鐘:秒數 12小時制, 會攜帶AM或PM標記)
//    %H:%M:%S (小時:分鐘:秒數, 24小時制)
//    %d/%b/%Y (日期/月份/年份)
// 更多的格式信息, 請參考 C 語言的 strftime 函數用法. 
// 
// rAthena 官方默認值是 [%d/%b %H:%M] 也就是24小時制的 [日/月 時:分]
// 這明顯不符合國人習慣, 為此Giraffe<模擬器>將其默認值改成了 [%Y/%m/%d %H:%M] 
// 
// 若想啟用時間戳的話, 請將下面這一行頭部的注釋符//去掉
//timestamp_format: [%d/%b %H:%M]

// 當服務端程序被一些啟動器 (LeeStarter) 運行, 從而導致輸出信息被重定向時, 
// 是否也將顏色代碼一同輸出? 
// 
// 問: 這里提到的重定向是指什麽? 
// 答: 原本地圖服務器的信息將直接顯示到控制台窗口, 不過若使用一些啟動工具
//     來啟動地圖服務器的話, 原本應該顯示到控制台的信息, 就會被"劫持"到了
//     啟動工具里面顯示, 這種情況稱之為"輸出信息被重定向了"!
// 
// 問: 這里提到的顏色代碼是指什麽? 
// 答: 在我們查看控制台的過程中, 會發現類似 [Status] 的字是綠色的, 
//     而 [Error] 是紅色的. 這是因為在程序往控制台輸出信息時, 加入了一些
//     顏色編碼的緣故. 比如, 若使用顏色編碼 "\033[1;31m" 那麽則表示接下來的
//     字符用紅色輸出. 其實有點類似我們腳本中使用的 ^xxxxxx 顏色代碼. 
// 
// 此選項一般情況下推薦關閉, 因為基本沒什麽啟動器支持著色
stdout_with_ansisequence: no

// 記錄地圖服務器在控制台中產生的部分信息到 /log/ 目錄中
// 首先您要確保Giraffe<模擬器>的目錄中有一個 log 文件夾, 沒有的話必須手動創建, 
// 否則日志文件將不會產生.
// 
// 1: 記錄控制台中以  [Warning] 開頭的警告信息
// 2: 記錄控制台中以  [Error]   開頭的錯誤信息和數據庫錯誤信息
// 4: 記錄控制台中以  [Debug]   開頭的調試信息
// 
// 例如: 想要記錄 [Warning]、[Error]、[Debug] 開頭的信息, 
//       只需要將1、2、4相加, 將 console_msg_log 設置為 7 即可 (1+2+4)! 
// 
// 日志信息的記錄並不會被 console_silent 選項影響.
// 也就是說假如 console_msg_log 設置為 2 想記錄 [Error] 信息,
// 而在 console_silent 中設置為 16 想隱藏 [Error] 信息,
// 此時系統將會隱藏 [Error] 信息不顯示到控制台, 但與此同時會記錄 [Error] 信息到日志中
console_msg_log: 0

// 將地圖服務器在控制台中產生的要記錄的信息, 寫到下面指定的日志文件中
console_log_filepath: ./log/map-msg_log.log

// 選擇性隱藏地圖服務器控制台中顯示出來的一些提示信息: 
// 1:  隱藏控制台中以  [Info]    開頭的提示信息
// 2:  隱藏控制台中以  [Status]  開頭的狀態信息
// 4:  隱藏控制台中以  [Notice]  開頭的注意信息
// 8:  隱藏控制台中以  [Warning] 開頭的警告信息
// 16: 隱藏控制台中以  [Error]   開頭的錯誤信息和數據庫錯誤信息
// 32: 隱藏控制台中以  [Debug]   開頭的調試信息
// 若您想同時隱藏多種信息, 只需要將其對應的數字相加即可
// 例如: 若您想要隱藏[Info]、[Status]、[Notice]開頭的信息, 
//       那麽只需要將1、2、4相加, 填寫 7 即可 (1+2+4)
console_silent: 0

// DB 文件放在哪個目錄中 (就是那個里面存放著 const.txt 的目錄)
// 您可以在此修改 DB 文件存放的目錄名稱
db_path: db

// 是否啟用 @guildspy 和 @partyspy 指令? 
// 注意: 啟用這兩個指令會降低封包的發送性能, 請酌情處理
enable_spy: no

// 是否從 grf-files.txt 所配置的 GRF 文件或者 data 目錄中
// 讀取地圖數據 (例如: Gat 文件 和Rsw 文件), 而不是從地圖緩存文件中讀取? 
// 
// 問: 地圖緩存文件的位置是? 
// 答: 覆興前在 db\pre-re\map_cache.dat 覆興後在 db\re\map_cache.dat
use_grf: no

// 是否允許在地圖服務器的控制台中直接輸入指令
// 開啟控制台指令後, 您可以在 map-server 的控制台中輸入命令
// 
// 在地圖服務器的控制台中輸入 help 然後回車, 可以查看指令說明
// 比如: 輸入 admin:@reloadscrpit 可以直接讓地圖服務器重載所有腳本
// 
// 想要啟用這個功能的話, 請將下面的值改成on即可
// 若啟用, 那麽請避免在控制台中使用 ">& 日志文件.log" 這樣的輸出指令
console: off

// 每一輪自動存檔的時間間隔 (以秒為單位)
// 在線的全部玩家數據都會在設定的時間內被自動存檔
// 注意: 當你設定為 300 秒保存一輪的情況下, 如果有 300 個玩家在線, 
//       那麽每秒鐘會保存1個玩家的數據.
autosave_time: 300

// 最小存檔的間隔時間 (以毫秒為單位)
// 此選項可防止一個角色在短時間內被頻繁存檔, 在線人數非常多的服務器
// 利用此選項可以大幅降低角色服務器和地圖服務器的存檔壓力
minsave_time: 100

// 除了 autosave_time 指定的自動存檔之外, 
// 當玩家進行下列操作行為之後, 應該立刻馬上執行存檔過程: 
// 
// 1:    每次和另外一個玩家交易成功
// 2:    每次成功開啟露天商店/露天商店有東西賣出
// 4:    每次關閉個人倉庫/公會倉庫
// 8:    每次寵物被孵化/變回蛋狀態
// 16:   每次成功的發送了一封帶有附件的郵件
// 32:   每次成功的在拍賣行提交一個物品
// 64:   每次接到/刪除/完成一個任務
// 128:  每次完成隨身銀行的存錢/取錢操作
// 256:  每次獲得簽到獎勵之後
// 4095: 以上全部時機都要立刻執行數據的存檔過程
// 
// 提示: 此選項可以在一些經常崩潰的服務端上, 起到很重要的保存作用.
//       通過增加一些關鍵的保存時機, 來避免玩家的數據丟失.
//
//       不過若您的服務端程序很少發生崩潰, 那麽可以盡量減少保存時機,
//       以此來降低內部服務器的通訊延遲. 因為保存數據需要服務器之間
//       很多內部數據傳遞和聯動. 
save_settings: 4095

// 聊天欄公告信息配置文件的路徑
// 當角色登入遊戲後, 里面的信息會顯示在聊天欄
motd_txt: conf/motd.txt

// 當遊戲管理員使用 @help 或 @h 指令時
// 會從下面的配置文件中加載相關的指令說明顯示到聊天欄
charhelp_txt: conf/charhelp.txt

// 頻道系統的配置文件
channel_conf: conf/channels.conf

// 地圖相關的配置文件
import: conf/maps_athena.conf

//===================================
// Giraffe<模擬器>拓展設置
//===================================
// 定義您想要使用的封包混淆密鑰
// 
// 從某個時間點開始, rAthena 官方放棄了 db/packet_db.txt 文件
// 以後您可以在這里配置自定義的封包混淆密鑰
// 若不配置, 則自動使用韓服官方客戶端默認的混淆密鑰.
//
// 關閉封包混淆機制的服務端不受此選項影響
// Giraffe<模擬器>默認開啟混淆, 可在官網定制中關閉封包混淆功能.
// 
// 不想修改的話, 請保持默認值: default
// 若想修改的話, 格式為(英文逗號左右都不能有空格): 0x347D68D0,0x2C705320,0x7B4A199D
//
// 注意: 客戶端從 2018-03-07 版本開始, 已經不再使用封包混淆機制了
// 若您使用的客戶端版本大於等於 2018-03-07, 那麽這里維持 default 即可.
packet_keys: default

import: conf/import/map_conf.txt
